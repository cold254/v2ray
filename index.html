<!DOCTYPE html>
<html>
<head>
    <title>Proxy Service</title>
    <script>
        class RouterProxy {
            constructor() {
                this.vpsBaseUrl = 'http://206.189.112.66';
                this.setupRouting();
            }

            setupRouting() {
                // Handle navigation
                window.addEventListener('popstate', () => this.loadRoute());
                
                // Intercept link clicks
                document.addEventListener('click', (e) => {
                    if (e.target.tagName === 'A' && e.target.href) {
                        e.preventDefault();
                        const path = new URL(e.target.href).pathname;
                        this.navigate(path);
                    }
                });
            }

            navigate(path) {
                history.pushState(null, '', path);
                this.loadRoute();
            }

            async loadRoute() {
                const path = window.location.pathname;
                try {
                    const response = await fetch(`${this.vpsBaseUrl}${path}`);
                    const content = await response.text();
                    
                    // Update page content
                    document.getElementById('content').innerHTML = content;
                    
                    // Update page title if available
                    const titleMatch = content.match(/<title>(.*?)<\/title>/i);
                    if (titleMatch) {
                        document.title = titleMatch[1];
                    }
                    
                } catch (error) {
                    document.getElementById('content').innerHTML = `
                        <h1>Error</h1>
                        <p>Failed to load: ${error.message}</p>
                    `;
                }
            }
        }

        // Initialize
        new RouterProxy();
        window.addEventListener('load', () => window.proxy.loadRoute());
    </script>
</head>
<body>
    <div id="content">Loading...</div>
</body>
</html>
